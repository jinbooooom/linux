# VIM

[vim 存在三种模式](https://zh.wikibooks.org/wiki/Vim/%E4%B8%89%E7%A7%8D%E6%A8%A1%E5%BC%8F#:~:text=Vim%E5%92%8CVi%E4%B8%80%E6%A0%B7%E5%85%B7%E6%9C%89%E4%B8%89%E7%A7%8D%E6%A8%A1%E5%BC%8F%EF%BC%9A%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F%EF%BC%88Command%20mode%EF%BC%89%EF%BC%8C%E6%8F%92%E5%85%A5%E6%A8%A1%E5%BC%8F%EF%BC%88Insert,mode%EF%BC%89%E5%92%8C%E5%BA%95%E7%BA%BF%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F%EF%BC%88Last%20line%20mode%EF%BC%89%E3%80%82)：

- 指令模式Command mode：把按键当做指令来处理
- 插入模式Insert mode：文本编辑。按`ESC`切换到指令模式，按`:`切换到底线命令模式
- 底线命令模式Last line mode：连续搜索或替换字符串、存档以及结束程序

### 基本设置

在最后行模式下

- 显示行号：`set nu`
- 关闭显示行号的功能：`set nonu`
- 设置 tab 为 4 个空格：`set tabstop=4`
- 设置自动缩进为 4 个空格：`set shiftwidth=4`

但上面的设置是临时的，若想永久性的设置，如下操作：

```shell
jinbo@fang:~$ cd /etc/vim/
jinbo@fang:/etc/vim$ sudo chmod 777 vimrc
jinbo@fang:/etc/vim$ vi vimrc

# 然后将下面的内容复制到文件尾部
syntax on	        "设置语法高亮，一般默认有，可不用添加此句
set tabstop=4           "设置制表符宽度为 4
set softtabstop=4       "设置软制表符宽度为 4
set shiftwidth=4        "设置缩进的空格数为 4
set autoindent          "设置自动缩进
set cindent	        "设置使用 c/c++ 语言的自动缩进方式
set nu		        "设置在左侧显示行号
```

### 启动与退出

- 启动：`vim file`
- 直接退出：`q`
- 保存并退出：`wq`

### 移动光标

- 方向建上下左右移动；
- `n+方向键`：表明向那个方向移动`n`【常用】
- `0`将光标移到该行的最前面
- `$`将光标移到该行的最后面
- `G`将光标移到最后一行的开头（必须大写）
- `Ctrl+b` 向上翻页，**建议用 `PageUp`**
- `Ctrl+f` 向下翻页，**建议用 `PageDown`**

### 行定位

`ngg`：光标定位到第`n`行的开头

### 复制文本

- `yy`：复制光标所在行
- `yw`：复制光标到单词尾部的所有字符
- `nyy`：例如`3yy`将光标位置所在的行与下面两行一起复制
- `p`：粘贴复制的内容到光标所在位置

### 删除文本

- `x`：删除当前字符

- `d+右方向键`：删除当前字符
- `d+左方向键`：删除前面一个字符
- `d+上（下）方向键`：将光标所在行与上（下）一行同时删除
- `dd`：删除光标所在行

### 撤销

- `u`：撤销上一次操作
- `U`：撤销对行所做的所有改变

### 搜索

使用`/`加上需要查找的字符，再回车，进入**向下查找**。这时按`n`查找下一个，`N`查找上一个。

使用`?`加上需要查找的字符，再回车，进入**向上查找**。这时按`n`查找下一个（向上查找的下一个，刚好等于向下查找上一个，即`N`），`N`查找上一个（向上查找的上一个，刚好等于向下查找的下一个，即`n`）。

一般在底线命令模式（按`：`进入）下，使用`/`向下查找。

大多数时候，在外部用`grep` 搜索到某个关键字的行号，然后用`vim test.cpp +n`来打开一个文件，并跳转到第`n`行



